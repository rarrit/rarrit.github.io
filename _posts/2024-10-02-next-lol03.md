---
title: "[3차] Next.js 리그오브레전드 정보 프로젝트 (챔피언 상세페이지 구현)"
date: 2024-10-02
layout: single
toc: true
toc_label: "목차"
toc_icon: "align-left"
toc_sticky: true
categories:
  - mini
  - til
tags:
  - mini project
author_profile: true
sidebar_main: true
---

## :ledger: [3차] Next.js 리그오브레전드 정보 프로젝트 

![champion-detail (1)](https://github.com/user-attachments/assets/413111dd-afa0-45c9-98ab-70c8c2e9312e)

### :rocket: 베포 링크

- vercel
  - [https://lol-info-app-chi.vercel.app/](https://lol-info-app-chi.vercel.app/)
- github
  - [https://github.com/rarrit/lol-info-app](https://github.com/rarrit/lol-info-app)
  - branch
    - feat/champion

### :one: 프로젝트 설명

NextJS와 TypeScript을 사용하고 Riot API를 활용하여 리그오브레전드의 다양한 데이터를 조회하고 이를 기반으로 생성한 프로젝트 입니다.

### :two: STACK
![Next JS](https://img.shields.io/badge/Next-black?style=for-the-badge&logo=next.js&logoColor=white) ![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white) ![React Query](https://img.shields.io/badge/-React%20Query-FF4154?style=for-the-badge&logo=react%20query&logoColor=white) ![TailwindCSS](https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white) ![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E) ![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)

### :three: 프로젝트 구조

- 3차에선 챔피언 상세 페이지를 완료했습니다.

<details>
<summary>전체 프로젝트 구조</summary>
📦app<br/>
 ┣ 📂_components<br/>
 ┃ ┣ 📂champions<br/>
 ┃ ┃ ┣ 📜ChampionCard.tsx<br/>
 ┃ ┃ ┗ 📜ChampionList.tsx<br/>
 ┃ ┗ 📂items<br/>
 ┃ ┃ ┣ 📜itemCard.tsx<br/>
 ┃ ┃ ┣ 📜itemDesc.tsx<br/>
 ┃ ┃ ┗ 📜itemList.tsx<br/>
 ┣ 📂api<br/>
 ┃ ┣ 📂rotation<br/>
 ┃ ┃ ┗ 📜route.ts<br/>
 ┃ ┗ 📜apiKey.ts<br/>
 ┣ 📂champions<br/>
 ┃ ┣ 📂[id]<br/>
 ┃ ┃ ┗ 📜page.tsx<br/>
 ┃ ┣ 📜layout.tsx<br/>
 ┃ ┣ 📜loading.tsx<br/>
 ┃ ┗ 📜page.tsx<br/>
 ┣ 📂fonts<br/>
 ┃ ┣ 📜GeistMonoVF.woff<br/>
 ┃ ┗ 📜GeistVF.woff<br/>
 ┣ 📂items<br/>
 ┃ ┣ 📜loading.tsx<br/>
 ┃ ┗ 📜page.tsx<br/>
 ┣ 📂rotation<br/>
 ┃ ┣ 📜loading.tsx<br/>
 ┃ ┗ 📜page.tsx<br/>
 ┣ 📂types<br/>
 ┃ ┣ 📜Champion.ts<br/>
 ┃ ┣ 📜ChampionRotation.ts<br/>
 ┃ ┗ 📜Item.ts<br/>
 ┣ 📂utils<br/>
 ┃ ┣ 📜riotApi.ts<br/>
 ┃ ┗ 📜serverApi.ts<br/>
 ┣ 📜favicon.ico<br/>
 ┣ 📜global-error.tsx<br/>
 ┣ 📜globals.css<br/>
 ┣ 📜layout.tsx<br/>
 ┣ 📜loading.tsx<br/>
 ┗ 📜page.tsx
</details>

### :four: 작업 목록

#### :pushpin: 4-1) 챔피언 상세페이지 설정
1. `app > champions > [id] > page.tsx` 동적 경로를 생성해줌
2. 선택한 챔피언의 데이터를 가져오기 위해 `params`를 정의해줬다.

```tsx
const ChampionsPage = async ({ params } : { params: { id: string }}) => {}
```

#### :pushpin: 4-2) 최신 버전과 챔피언 데이터 가져오기
1. 상세페이지의 id의 맞게 조회할 수 있게 전체 챔피언 데이터 중 params.id 값과 같은 챔피언 데이터를 가져옴 (`getChampionDetail(params.id)`)
2. `getLatestVersionUrl` 함수를 통해 최신 버전을 가져온 것은 Image 태그의 src에 값을 넣기 위함인데, 이게 최선인지 현재로선 판단이 되지 않았다. 최종 완료 후 피드백을 받고 수정할 예정이다.

```tsx
// app > champions > [id] > page.tsx
const champion = await getChampionDetail(params.id);
const latestVersion = await getLatestVersionUrl();

// app > utils > serverApi.ts
export const getLatestVersionUrl = async () => {
  const latestVersions = `${RIOT_BASE_URL}/api/versions.json`;
  const res = await fetch(latestVersions);
  const version: string[] = await res.json();
  const latestVersion = version[0];
  return latestVersion;
}

export const getChampionDetail = async ( id : string ) => {
  try {
    const latestVersion = await getLatestVersionUrl();
    const res = await fetch(`${RIOT_BASE_URL}/cdn/${latestVersion}/data/ko_KR/champion/${id}.json`);
    const { data } = await res.json();
    return data;
  }catch (error) {
    console.error("챔피언 상세 데이터 가져오기 에러:", error);
    throw error; 
  }
}
```

#### :pushpin: 4-3) 데이터 정의 및 사용
1. `championKey`: 최신 버전의 값을 할당함
2. `championDetail`: 챔피언의 상세정보 데이터를 할당함
3. `championSkins`: 챔피언의 관련 스킨 데이터를 할당함
4. 데이터가 없는 경우 삼항연산자를 사용해서 기본 데이터 적용

```tsx

// info 
return (
    <div id="championDetail" className="h-full pb-[60px]">      
      <div className="detail-top relative pt-[44px]">
        <div 
          className="absolute top-0 left-0 w-full h-[90%] bg-no-repeat bg-center bg-cover z-[1]"
          style={{
            backgroundImage: `url('${RIOT_BASE_URL}/cdn/img/champion/splash/${championDetail.id}_0.jpg')`,
            filter: "blur(15px)"
          }}
        ></div>
        <div 
          className="absolute top-0 left-0 w-full h-full z-[2] bg-no-repeat bg-center bg-contain max-m:bg-cover"
          style={{
            backgroundImage: `url('${RIOT_BASE_URL}/cdn/img/champion/splash/${championDetail.id}_0.jpg')`,
          }}
        ></div>
        <div className="absolute top-0 left-0 w-full h-full bg-[rgba(0,0,0,.5)] z-[3]"></div>
        <div className="relative z-20 flex justify-center w-full h-full flex max-w-[1440px] m-auto px-[30px] pt-[15%] pb-[20%] gap-[10px]">
          <div className="tBox w-full max-w-[600px]">
            <h1 className="flex flex-col justify-center items-center">                     
              <p className="text-[40px] font-bold bg-icon01 bg-no-repeat bg-[length:50px] bg-top pt-[60px] max-m:text-[30px]">{championDetail.name}</p>
              <span className="text-[13px] shadow-custom-white bg-[#111] rounded-[10px] mt-[5px] mb-[15px] py-[5px] px-[15px] max-m:text-[12px]">{championDetail.title}</span>
            </h1>        
            <p 
              className="text-center text-[14px] break-keep max-m:text-[13px]"
              style={{
                textShadow: ".1px .1px 3px rgb(241, 215, 40, .8)",
              }}
            >{championDetail.blurb}</p>
          </div>
        </div>            
      </div>
      <div className="w-full max-w-[1600px] m-auto px-[30px] max-m:px-[15px]">    
        <div className="infoBox flex items-stretch gap-[20px] mt-[40px] max-t:flex-col">
          <div className="w-[calc(50%-10px)] bg-[#111] shadow-custom rounded-[10px] p-[30px] max-t:w-full max-m:p-[15px]">
            <h2 className="text-[24px] font-medium mb-[10px] pb-[5px] border-b border-[rgba(255,255,255,.4)]">Info</h2>
            <div className="infoBox">
              <dl className="flex items-center gap-[5px]">
                <dt className="w-[100px]">Attack</dt>
                <dd className="w-[calc(100%-100px)] bg-[#222] rounded-[10px]">
                  <span 
                    className={`relative flex h-[5px] bg-[rgba(241,40,40,1)] rounded-[10px]`}
                    style={{
                      width: `${championDetail.info.attack !== 0 ? championDetail.info.attack * 10 : 55}%`
                    }}
                  ></span>
                </dd>
              </dl>
              <dl className="flex items-center gap-[5px]">
                <dt className="w-[100px]">Defense</dt>
                <dd className="w-[calc(100%-100px)] bg-[#222] rounded-[10px]">
                  <span 
                    className={`flex h-[5px] bg-[rgba(108,241,40,1)] rounded-[10px]`}
                    style={{
                      width: `${championDetail.info.defense !== 0 ? championDetail.info.defense * 10 : 30}%`
                    }}
                  ></span>
                </dd>
              </dl>
              <dl className="flex items-center gap-[5px]">
                <dt className="w-[100px]">Magic</dt>
                <dd className="w-[calc(100%-100px)] bg-[#222] rounded-[10px]">
                  <span 
                    className="flex h-[5px] bg-[rgba(47,40,241,1)] rounded-[10px]"
                    style={{
                      width: `${championDetail.info.magic !== 0 ? championDetail.info.magic * 10 : 44}%`
                    }}
                  ></span>
                </dd>
              </dl>
              <dl className="flex items-center gap-[5px]">
                <dt className="w-[100px]">Difficulty</dt>
                <dd className="w-[calc(100%-100px)] bg-[#222] rounded-[10px]">
                  <span 
                    className="flex w-[${championDetail.info.difficulty * 10}%] h-[5px] bg-[rgba(241,238,40,1)] rounded-[10px]"
                    style={{
                      width: `${championDetail.info.difficulty !== 0 ? championDetail.info.difficulty * 10 : 76}%`
                    }}
                  ></span>
                </dd>
              </dl>
            </div>
          </div>
          <div className="w-[calc(50%-10px)] bg-[#111] shadow-custom rounded-[10px] p-[30px] max-t:w-full max-m:p-[15px]">      
            <h2 className="text-[24px] font-medium mb-[10px] pb-[5px] border-b border-[rgba(255,255,255,.4)]">Skills<span className="text-[12px] text-[rgba(255,255,255,.3)] ml-[10px]">(마우스를 올리면 상세 정보를 확인할 수 있습니다.)</span></h2>
            <ul className="flex items-start gap-[10px] max-m:flex-wrap">              
              {
                championDetail.spells.map(spell => {
                  return (
                    <li key={spell.id} className="flex flex-1 flex-col items-center justify-start gap-[5px] max-m:flex-none max-m:w-[calc(50%-10px)]">
                      <div>                        
                        <Image 
                          src={`${RIOT_BASE_URL}/cdn/${latestVersion}/img/spell/${spell.id}.png`} 
                          className="m-auto rounded-[5px] shadow-custom-white"
                          width={50}
                          height={50}
                          alt={spell.id ? spell.id : "챔피언 이미지"} 
                        />     
                        <p className="text-[14px] mt-[10px] text-center font-bold">
                          {spell.name}
                        </p>                 

                      </div>
                      <div className="text-[13px] text-center text-[rgba(199,199,199,1)] line-clamp-2">
                        {spell.description}
                      </div>
                    </li>
                  )
                })
              }
            </ul>
          </div>
        </div>
        <div className="infoBox mt-[20px]">
          <div className="w-full bg-[#111] shadow-custom rounded-[10px] p-[30px] max-m:p-[15px]">
            <h2 className="text-[24px] font-medium mb-[10px] pb-[5px] border-b border-[rgba(255,255,255,.4)]">Skins</h2>
            <div className="skinList flex flex-wrap items-center gap-[10px]">
              {            
                championSkins.map(skin => {
                  return (
                    <div key={skin.id} className="relative flex flex-col items-center w-[calc(33.333%-10px)] py-[10%] max-t:w-full max-t:py-[30%] max-m:w-full max-m:py-[30%]">
                      <div className="loading-ui">
                        <p className="bg-loading">로딩중입니다.</p>
                      </div>
                      <Image
                        src={`${RIOT_BASE_URL}/cdn/img/champion/splash/${championDetail.id}_${skin.num}.jpg`}
                        layout="fill"
                        alt={skin.id}
                        className="rounded-lg shadow-lg"
                      />
                      <p className="absolute top-[5px] right-[5px] z-20 min-w-[120px] flex items-center justify-center p-[8px] font-medium bg-black bg-opacity-70 rounded-[10px] max-m:text-[14px]">{skin.name}</p>
                    </div>
                  );
                })
              }
            </div>
          </div>          
        </div>
        <div className="btnArea flex items-center justify-center mt-[30px] mb-[60px] group">
          <Link href={"/champions"} className="bg-[#131313] shadow-custom rounded-[10px] px-[40px] py-[20px] group-hover:bg-[rgba(40,40,241,1)]">목록으로 돌아가기</Link>
        </div>
      </div>
    </div>
  )
```

### :fire: 회고
상세페이지를 작업 완료 후 욕심에 비해 많은 기능을 적용하지 못한 아쉬움이 너무 컸다. 생각보다 테일윈드도 손에 쉽게 익지 않지만 재밌게 한 편

#### :pushpin: Keep - 현재 만족하고 있는 부분
테일윈드가 많이 익숙하지 않았는데, 호버, 반응형 및 커스텀 작업까지 할 수 있게 되었고 원하는 데이터를 필터링해서 바인딩할 수 있다.

#### :pushpin: Problem - 불편하게 느끼는 부분
타입을 정의하는 부분에서 너무 헷갈린다. 

#### :pushpin: Try - problem에 대한 해결책, 당장 실행 가능한 것
생각해보니 타입스크립트도 배운 지 얼마 안되가지고 불편한 건 어쩔 수 없고 계속 써봐야한다고 생각함