---
title: "[5ì°¨] Next.js ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œ ì •ë³´ í”„ë¡œì íŠ¸ (ë¡œë”© ë° ì—ëŸ¬ ì‘ì—…)"
date: 2024-10-04
layout: single
toc: true
toc_label: "ëª©ì°¨"
toc_icon: "align-left"
toc_sticky: true
categories:
  - mini
  - til
tags:
  - mini project
author_profile: true
sidebar_main: true
---

## :ledger: [5ì°¨] Next.js ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œ ì •ë³´ í”„ë¡œì íŠ¸ 

![error-ui](https://github.com/user-attachments/assets/59c13abf-1f4f-4b8d-a46a-eba58be59d56)

### :rocket: ë² í¬ ë§í¬

- vercel
  - [https://lol-info-app-chi.vercel.app/](https://lol-info-app-chi.vercel.app/)
- github
  - [https://github.com/rarrit/lol-info-app](https://github.com/rarrit/lol-info-app)
  - branch
    - feat/loading

### :one: í”„ë¡œì íŠ¸ ì„¤ëª…

NextJSì™€ TypeScriptì„ ì‚¬ìš©í•˜ê³  Riot APIë¥¼ í™œìš©í•˜ì—¬ ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œì˜ ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±í•œ í”„ë¡œì íŠ¸ ì…ë‹ˆë‹¤.

### :two: STACK
![Next JS](https://img.shields.io/badge/Next-black?style=for-the-badge&logo=next.js&logoColor=white) ![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white) ![React Query](https://img.shields.io/badge/-React%20Query-FF4154?style=for-the-badge&logo=react%20query&logoColor=white) ![TailwindCSS](https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white) ![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E) ![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)

### :three: í”„ë¡œì íŠ¸ êµ¬ì¡°

- 4ì°¨ì—ì„  ì „ì²´ í˜ì´ì§€ ë°˜ì‘í˜• ì‘ì—…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

<details>
<summary>ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°</summary>
ğŸ“¦app<br/>
 â”£ ğŸ“‚_components<br/>
 â”ƒ â”£ ğŸ“‚champions<br/>
 â”ƒ â”ƒ â”£ ğŸ“œChampionCard.tsx<br/>
 â”ƒ â”ƒ â”— ğŸ“œChampionList.tsx<br/>
 â”ƒ â”— ğŸ“‚items<br/>
 â”ƒ â”ƒ â”£ ğŸ“œitemCard.tsx<br/>
 â”ƒ â”ƒ â”£ ğŸ“œitemDesc.tsx<br/>
 â”ƒ â”ƒ â”— ğŸ“œitemList.tsx<br/>
 â”£ ğŸ“‚api<br/>
 â”ƒ â”£ ğŸ“‚rotation<br/>
 â”ƒ â”ƒ â”— ğŸ“œroute.ts<br/>
 â”ƒ â”— ğŸ“œapiKey.ts<br/>
 â”£ ğŸ“‚champions<br/>
 â”ƒ â”£ ğŸ“‚[id]<br/>
 â”ƒ â”ƒ â”— ğŸ“œpage.tsx<br/>
 â”ƒ â”£ ğŸ“œlayout.tsx<br/>
 â”ƒ â”£ ğŸ“œloading.tsx<br/>
 â”ƒ â”— ğŸ“œpage.tsx<br/>
 â”£ ğŸ“‚fonts<br/>
 â”ƒ â”£ ğŸ“œGeistMonoVF.woff<br/>
 â”ƒ â”— ğŸ“œGeistVF.woff<br/>
 â”£ ğŸ“‚items<br/>
 â”ƒ â”£ ğŸ“œloading.tsx<br/>
 â”ƒ â”— ğŸ“œpage.tsx<br/>
 â”£ ğŸ“‚rotation<br/>
 â”ƒ â”£ ğŸ“œloading.tsx<br/>
 â”ƒ â”— ğŸ“œpage.tsx<br/>
 â”£ ğŸ“‚types<br/>
 â”ƒ â”£ ğŸ“œChampion.ts<br/>
 â”ƒ â”£ ğŸ“œChampionRotation.ts<br/>
 â”ƒ â”— ğŸ“œItem.ts<br/>
 â”£ ğŸ“‚utils<br/>
 â”ƒ â”£ ğŸ“œriotApi.ts<br/>
 â”ƒ â”— ğŸ“œserverApi.ts<br/>
 â”£ ğŸ“œfavicon.ico<br/>
 â”£ ğŸ“œglobal-error.tsx<br/>
 â”£ ğŸ“œglobals.css<br/>
 â”£ ğŸ“œlayout.tsx<br/>
 â”£ ğŸ“œloading.tsx<br/>
 â”— ğŸ“œpage.tsx
</details>

### :four: ì‘ì—… ëª©ë¡

#### :pushpin: 4-1) ê¸€ë¡œë²Œ ë¡œë”© ì‘ì—…
ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¡œë”© ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í–ˆë‹¤.

```tsx
// app > loading
export default function Loading() {
  return (
    <div className="loading-ui fixed z-[9999]">
      <p className="bg-loading">ë¡œë”©ì¤‘ì…ë‹ˆë‹¤.</p>
    </div>
  )
}
```

#### :pushpin: 4-2) íŠ¹ì • í˜ì´ì§€ ë¡œë”© ì‘ì—…
ì˜ˆì‹œ) `app > champions > loading.tsx` íŠ¹ì • í˜ì´ì§€ ë¡œë”©ì€ ë””ë ‰í† ë¦¬ ë‚´ì— loading.tsx ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ì„œ í•´ë‹¹ í˜ì´ì§€ì—ì„œ ë¡œë”©ì„ ì ìš©í•´ì£¼ì—ˆë‹¤.

```tsx
export default function Loading(){
  return (
    <div className="loading-ui fixed z-[9999]">
      <p className="bg-loading">ì‰¿! ì±”í”¼ì–¸ ë°ì´í„° ë°›ì•„ì˜¤ëŠ”ì¤‘</p>
    </div>
  )
}
```

#### :pushpin: 4-3) ì±”í”¼ì–¸ ì¹´ë“œ ë¡œë”© ì‘ì—… (Image ì»´í¬ë„ŒíŠ¸)
ë¡œë”© uiê°€ full í™”ë©´ìœ¼ë¡œ ë‚˜ì˜¤ëŠ”ë°, íŠ¹ì • ì±”í”¼ì–¸ ì¹´ë“œì˜ ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ë•Œ í•´ë‹¹ ì¹´ë“œì—ë§Œ ë¡œë”© íš¨ê³¼ë¥¼ ì£¼ê¸°ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ ì‘ì—…í•´ë³´ì•˜ë‹¤.

1. `CSR` í™˜ê²½ìœ¼ë¡œ ì ìš©
2. `useState` ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸° ë¡œë”©ì˜ ìƒíƒœê°’ì„ trueë¡œ ì§€ì •í•¨
3. `Image` ì»´í¬ë„ŒíŠ¸ì˜ `onLoadingComplete` ì†ì„±ì„ í™œìš©í•´ì£¼ì—‡ìŒ
  - ì´ë¯¸ì§€ê°€ ì™„ì „íˆ ë¡œë”©ì´ ëë‚˜ë©´ í˜¸ì¶œë˜ëŠ” ì½œë°± í•¨ìˆ˜ ê´€ë ¨ ì†ì„±ì„


```tsx
const [loading, setLoading] = useState(true);

const handleLoadingComplete = () => {
  setLoading(false);  // ì´ë¯¸ì§€ ë¡œë”© ì™„ë£Œ ì‹œ ë¡œë”© ìƒíƒœë¥¼ falseë¡œ ë³€ê²½
};

{
  loading ? (
    <div className="loading-ui">
      <p className="bg-loading">ë¡œë”©ì¤‘ì…ë‹ˆë‹¤.</p>
    </div>
  ) : ("")
}

{champion.image && (
  <Image 
    src={`${RIOT_BASE_URL}/cdn/img/champion/splash/${champion.id}_0.jpg`} 
    className="w-full h-full transition-all duration-500 ease-in-out transform group-hover:scale-110"
    layout="fill"
    alt={champion ? champion.name : "ì±”í”¼ì–¸ ì´ë¯¸ì§€"} 
    onLoadingComplete={handleLoadingComplete}         
  />
)}
```

#### :pushpin: 4-5) global error ì ìš©

![error-ui](https://github.com/user-attachments/assets/59c13abf-1f4f-4b8d-a46a-eba58be59d56)

1. `app > global-error.tsx` 
  - ëª¨ë“  ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì „ì—­ ì—ëŸ¬ ì»´í¬ë„ŒíŠ¸
2. `app > error.tsx`
  - ì—ëŸ¬ ë° reset í•¨ìˆ˜ë¥¼ Propsë¡œ ì „ë‹¬í•˜ì—¬ global-error.tsxì—ì„œ ì •ì˜í•œ ì—ëŸ¬ ë¡œì§ì„ ì‚¬ìš©í•¨
  - ì´ íŒŒì¼ì´ ì—†ìœ¼ë©´ Next.jsëŠ” ê¸°ë³¸ ì—ëŸ¬ í˜ì´ì§€ë¥¼ ì‚¬ìš©í•˜ê²Œ ë¨

```tsx
// app > global-error.tsx
"use client";

import Link from "next/link";
import { useEffect } from "react";

export default function GlobalError({
  error,
  reset,
}: {
  error: Error & { digest?: string }
  reset: () => void
}) {
  useEffect(() => {
    console.error(error);
  }, [error]);

  return (
    <div className="fixed top-0 left-0 w-full h-full z-[9999] bg-[#111] flex items-center justify-center">
      <div className="min-w-[400px] bg-error">
        <h2 className="text-[20px] mb-[20px] text-center">ì–´ë¨¸ ì—ëŸ¬ê°€ ë°œìƒí–ˆë„¤ìš”!</h2>
        <p className="text-center text-[rgba(85,85,85,1)]">{error.message}</p>
        <div className="btnArea flex items-center justify-center gap-[10px] mt-[40px]">
          <button onClick={reset} className="flex flex-1 justify-center rounded-[10px] bg-black py-[20px]">ë‹¤ì‹œ ì‹œë„í•˜ê¸°</button>          
          <Link href="/" className="flex flex-1 justify-center rounded-[10px] bg-black py-[20px]">ë©”ì¸ìœ¼ë¡œ ì´ë™í•˜ê¸°</Link>
        </div>        
      </div>
    </div>
  );
}


// app > error.tsx
"use client";
import GlobalError from "./global-error";


type ErrorProps = {
  error: Error & { digest?: string }; // errorì˜ íƒ€ì… ì •ì˜
  reset: () => void; // reset í•¨ìˆ˜ì˜ íƒ€ì… ì •ì˜
};

export default function Error({ error, reset }: ErrorProps) {
  return (
    <GlobalError error={error} reset={reset} />
  );
}
```

### :joystick: Trouble Shooting
- [[Next.js] CSR í™˜ê²½ì—ì„œ Suspense ì‚¬ìš©í•´ë³´ì•˜ë‹¤.](https://rarrit.github.io/troubleshooting/til/troubleshooting-suspense/)
- [[Next.js] ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ERROR UIê°€ ë…¸ì¶œì´ ë˜ì§€ ì•Šì€ ì´ìœ ë¥¼ ì•Œì•„ë³´ì.](https://rarrit.github.io/troubleshooting/til/troubleshooting-error-ui/)

### :fire: íšŒê³ 
ë¡œë”©ê³¼ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ë©´ì„œ ì‚¬ìš©ì ê²½í—˜ì„ í¬ê²Œ ê°œì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë¡œë”© ì‹œ ì§„í–‰ ìƒí™©ì„ ëª…í™•íˆ ì•Œë¦¬ê³ , ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©ìê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ì—¬ ë¶ˆí¸í•¨ì„ ì¤„ì˜€ë‹¤. ê·¸ë¦¬ê³  ì—ëŸ¬ ìƒí™©ì—ì„œ ì¬ì‹œë„ë‚˜ ëŒ€ì•ˆì„ ì œì‹œí•¨ìœ¼ë¡œì„œ ì‚¬ìš©ìê°€ ì—ëŸ¬í˜ì´ì§€ì—ì„œ íƒˆì¶œí•  ìˆ˜ ìˆë„ë¡ í–ˆê³  ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ì˜ ì•ˆì „ì„±ì„ ë†’ì´ì§€ ì•Šì•˜ì„ê¹Œ í•˜ëŠ” ìƒê°ì´ ë“ ë‹¤.

#### :pushpin: Keep - í˜„ì¬ ë§Œì¡±í•˜ê³  ìˆëŠ” ë¶€ë¶„
ì´ë²ˆ ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œ ì •ë³´ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ì²˜ìŒì— íƒœì‚°ê³¼ë„ ê°™ì•˜ë˜ Next.jsë¥¼ ì¡°ê¸ˆì”© ì•Œ ìˆ˜ ìˆê²Œë˜ì–´ ë§Œì¡±í•¨

#### :pushpin: Problem - ë¶ˆí¸í•˜ê²Œ ëŠë¼ëŠ” ë¶€ë¶„
ì—ëŸ¬ë¥¼ ê²½í—˜í•  ë•Œ ë§ˆë‹¤ ìƒˆë¡­ê³  ê³ í†µìŠ¤ëŸ½ë‹¤. ë­”ê°€ ì‚°ì„ ì˜¬ë¼ê°€ë©´ì„œ ì§€ì¹  ë•Œ ì•„ ì´ë§Œí•˜ë©´ ë‚´ë ¤ê°€ë„ë˜ì§€ ì•Šì„ê¹Œ í•˜ëŠ” ë§ˆìŒì´ ë“œëŠ”..

#### :pushpin: Try - problemì— ëŒ€í•œ í•´ê²°ì±…, ë‹¹ì¥ ì‹¤í–‰ ê°€ëŠ¥í•œ ê²ƒ
í¬ê¸°í•˜ì§€ë§Œ ë§ì.........!