---
title: "[1차] Next.js 리그오브레전드 정보 프로젝트 (초기 세팅 및 API 활용)"
date: 2024-09-30
layout: single
toc: true
toc_label: "목차"
toc_icon: "align-left"
toc_sticky: true
categories:
  - next
  - mini
  - til
tags:
  - mini project
author_profile: true
sidebar_main: true
---

## :ledger: [1차] Next.js 리그오브레전드 정보 프로젝트 

<!-- ![1  mbti-test-main](https://github.com/user-attachments/assets/8d85374b-7b5e-4db3-a19a-35bd9fb1f9f5) -->

## :rocket: 베포 링크

- vercel
  - 대기중
- github
  - [https://github.com/rarrit/lol-champion-app](https://github.com/rarrit/lol-champion-app)

## :one: 프로젝트 설명

NextJS와 TypeScript를 사용하여 Riot API를 활용하여 리그오브레전드의 다양한 데이터를 조회하고 이를 기반으로 생성한 프로젝트 입니다.

## :two: STACK
![Next JS](https://img.shields.io/badge/Next-black?style=for-the-badge&logo=next.js&logoColor=white) ![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white) ![React Query](https://img.shields.io/badge/-React%20Query-FF4154?style=for-the-badge&logo=react%20query&logoColor=white) ![TailwindCSS](https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white) ![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E) ![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)

## :three: 프로젝트 구조

- 1차에선 프로젝트 초기 세팅 및 API 세팅을 했습니다.

<details>
<summary>전체 프로젝트 구조</summary>
📦app<br/>
 ┣ 📂_components<br/>
 ┃ ┣ 📂champions<br/>
 ┃ ┃ ┣ 📜ChampionCard.tsx<br/>
 ┃ ┃ ┗ 📜ChampionList.tsx<br/>
 ┃ ┣ 📂common<br/>
 ┃ ┃ ┗ 📜Button.tsx<br/>
 ┃ ┗ 📂items<br/>
 ┃ ┃ ┗ 📜ItemCard.tsx<br/>
 ┣ 📂api<br/>
 ┃ ┣ 📜apiConfig.ts<br/>
 ┃ ┣ 📜apiKey.ts<br/>
 ┃ ┗ 📜champions.ts<br/>
 ┣ 📂champions<br/>
 ┃ ┣ 📂[id]<br/>
 ┃ ┃ ┗ 📜page.tsx<br/>
 ┃ ┗ 📜page.tsx<br/>
 ┣ 📂fonts<br/>
 ┃ ┣ 📜GeistMonoVF.woff<br/>
 ┃ ┗ 📜GeistVF.woff<br/>
 ┣ 📂items<br/>
 ┃ ┣ 📂[id]<br/>
 ┃ ┃ ┗ 📜page.tsx<br/>
 ┃ ┗ 📜page.tsx<br/>
 ┣ 📂rotation<br/>
 ┃ ┗ 📜page.tsx<br/>
 ┣ 📂types<br/>
 ┃ ┣ 📜Champion.ts<br/>
 ┃ ┣ 📜ChampionRotation.ts<br/>
 ┃ ┗ 📜Item.ts<br/>
 ┣ 📜favicon.ico<br/>
 ┣ 📜globals.css<br/>
 ┣ 📜layout.tsx<br/>
 ┗ 📜page.tsx<br/>
</details>

## :four: 디렉토리 설명

#### :pushpin: 4-1) app \> _components
공통 컴포넌트 디렉토리, 초기 세팅 및 1차 작업에서는 챔피언 위주로 작업해서 ItemList 추가할 예정이다.

- `ChampionList.tsx`: 챔피언 리스트
- `ChampionCard.tsx`: 챔피언 리스트에 출력될 챔피언 카드
- `Button.tsx`: 공통 버튼으로 사용할 예정
- `ItemCard.tsx`: 아이템 카드 

#### :pushpin: 4-2) app \> api
초기 api 세팅 디렉토리, api 관련 세팅을 해줬다. 

- `apiConfig.ts`: 챔피언, 아이템 등 최신 버전의 데이터를 제공하는 API URL 반환
- `apiKey.ts`: 환경 변수에서 세팅한 Riot API key를 설정
- `champions.ts`: lol API에서 최신 버전 정보를 가져오고 해당 버전에 맞는 전체 챔피언 데이터를 요청하여 반환

#### :pushpin: 4-3) app \> champions
챔피언 리스트, 챔피언 상세페이지, 해당 페이지에서 최신 챔피언 리스트를 조회할 수 있으며, 클릭해서 상세 정보를 확인할 수 있다.

#### :pushpin: 4-4) app \> items
아이템 리스트, 아이템 상세페이지, 해당 페이지에서 리그오브레전드의 아이템 리스트를 확인할 수 있으며, 클릭해서 상세 정보를 확인할 수 있다.

#### :pushpin: 4-5) app \> rotation
매주 무료로 플레이할 수 있는 챔피언들의 목록을 확인할 수 있다.

#### :pushpin: 4-6) app \> layout.tsx
공통 헤더 및 푸터 를 생성 후 헤더에 챔피언,아이템,로테이션 메뉴를 생성

#### :pushpin: 4-7) app \> types
이번 프로젝트에서 사용할 정보를 정의한 타입 인터페이스다.

## :five: 작업 목록

#### :pushpin: 5-1) 초기 세팅
- 위와 같이 디렉토리를 설정하고 env 파일을 생성하여 key값을 설정해주었다. 
- api 디렉토리 내에서 api관련 key값 및 서버 액션 함수를 생성해주었다.
- 프로젝트에 필요한 페이지를 생성

#### :pushpin: 5-2) 챔피언 리스트 페이지
챔피언 리스트 페이지에서는 `ChampionList` 비동기 컴포넌트를 정의하고 렌더링한다.

```tsx
import ChampionList from "../_components/champions/ChampionList"

const ChampionPage = async () => <ChampionList/>

export default ChampionPage
```

#### :pushpin: 5-3) 챔피언 리스트 컴포넌트
Riot API에서 가져온 챔피언 데이터를 기반으로 챔피언 목록을 화면에 렌더링한다.

- `getChampions`: 챔피언 데이터를 가져오는 `getChampions` 함수를 호출해서 데이터를 받아옴
- `champions`: 받아온 데이터에서 `Object.values`를 사용하여 객체의 값들을 배열로 반환함

```tsx
import { getChampions } from "@/app/api/champions";
import ChampionCard from "./ChampionCard";

const ChampionList = async () => {
  const data = await getChampions();
  const champions = Object.values(data); // Object.values로 변경하여 ChampionInfo 배열 생성

  return (
    <div id="championList" className="flex flex-wrap">
      {
        champions.map(champion => {
          return (
            <ChampionCard 
              key={champion.id} 
              champion={champion} // champion prop 전달
            />
          );
        })
      }
    </div>
  );
}

export default ChampionList;
```


#### :pushpin: 5-4) 챔피언 카드 컴포넌트
챔피언의 이름,타이틀,이미지 등 화면에 표시하는 역할을 하는 컴포넌트이다.

- `ChampionCardProps`: 해당 컴포넌트가 받을 `champion` prop 타입을 정의함
- `React.FC`: Function Component 타입의 줄임말로, React + Typescript 조합으로 개발할 때 사용하는 타입이다.
  - 함수형 컴포넌트 사용 시 타입 선언에 쓸 수 있도록 React에서 제공하는 타입.

```tsx
import { ChampionInfo } from "@/app/types/Champion";
import Image from "next/image";

type ChampionCardProps = {
  champion: ChampionInfo; // champion prop을 정의
};

const ChampionCard: React.FC<ChampionCardProps> = ({ champion }) => {
  console.log("champion==>",champion);
  return (
    <div>
      <h2>{champion.name}</h2>
      <p>{champion.title}</p>
      {champion.image && (
        <Image 
          src={`https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${champion.id}_0.jpg`} 
          width={100}
          height={100}
          alt={champion?.name} 
        />
      )}
    </div>
  );
};

export default ChampionCard;

```

## :fire: 회고
처음 진행하는 타입스크립트 + Next.js 프로젝트.. 아직 너무 손에 안익어서 세팅만 몇 시간이 걸린지 모르겠다. 이번 개인과제 기간은 널널하니 느리더라도 완료할 수 있도록 노력해보려 한다.

### :pushpin: Keep - 현재 만족하고 있는 부분
API를 세팅하는 과정에서 어려움이 있었지만 화면에 최신 챔피언 리스트를 뿌려준 것

### :pushpin: Problem - 불편하게 느끼는 부분
타입스크립트가 생각보다 많이 어렵게 느껴진다. 확실히 어떻게 사용해야 되는지는 아직까진 잘 모르겠으며, 중간중간 코드에서 타입 확인하라고 하면 그때 확인하며 작업중이다.

### :pushpin: Try - problem에 대한 해결책, 당장 실행 가능한 것
TypeScript와 Next.js를 공부하고 처음 진행하는 프로젝트라 어려움이 많지만 어쩔 수 없다. 많이 사용해보며 익숙해지도록 노력해야겠다.